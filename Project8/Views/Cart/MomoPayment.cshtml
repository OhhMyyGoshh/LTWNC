@{
    ViewBag.Title = "Thanh toán MoMo";
    Layout = "~/Views/Shared/_Layout.cshtml";

    int orderId = ViewBag.OrderId != null ? (int)ViewBag.OrderId : 0;
    long amount = ViewBag.Amount != null ? (long)ViewBag.Amount : 0L;
    string transferContent = ViewBag.TransferContent as string ?? ("BOOK-" + orderId);
}

<style>
    .momo-wrapper {
        max-width: 700px;
        margin: 20px auto 40px auto;
        background: #fff;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        padding: 20px 25px;
    }

    .momo-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 15px;
    }

    .momo-header-left h3 {
        margin: 0;
        font-weight: 600;
        color: #333;
    }

    .momo-header-left p {
        margin: 3px 0 0;
        font-size: 13px;
        color: #777;
    }

    .momo-countdown {
        background: #fff3f7;
        color: #c2185b;
        padding: 8px 12px;
        border-radius: 999px;
        font-size: 13px;
        display: inline-flex;
        align-items: center;
        gap: 8px;
    }

    .momo-body {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        margin-top: 10px;
    }

    .momo-left,
    .momo-right {
        flex: 1 1 280px;
    }

    .momo-qr-box {
        text-align: center;
        border-radius: 8px;
        border: 1px solid #f3e1eb;
        padding: 15px 10px;
        background: #fff8fb;
    }

        .momo-qr-box img {
            max-width: 240px;
            width: 100%;
            border-radius: 8px;
            border: 2px solid #ae2070;
        }

        .momo-qr-box p {
            margin-top: 10px;
            font-size: 13px;
            color: #666;
        }

    .momo-info-list {
        list-style: none;
        padding-left: 0;
        margin: 0;
        font-size: 14px;
        color: #444;
    }

        .momo-info-list li {
            margin-bottom: 8px;
        }

    .momo-info-label {
        font-weight: 600;
        display: inline-block;
        min-width: 110px;
    }

    .momo-amount {
        font-size: 18px;
        font-weight: 700;
        color: #e91e63;
    }

    .momo-note {
        margin-top: 10px;
        font-size: 12px;
        color: #777;
    }

    .momo-actions {
        margin-top: 15px;
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
    }

    .momo-expired {
        color: #d32f2f;
        font-weight: 600;
    }
</style>

<div class="momo-wrapper">
    <div class="momo-header">
        <div class="momo-header-left">
            <h3>Thanh toán qua ví MoMo</h3>
            <p>Mã đơn hàng: <strong>#@orderId</strong></p>
        </div>
        <div>
            <div id="momoCountdown" class="momo-countdown">
                <i class="fa fa-clock-o"></i>
                Hết hạn trong: <span id="momoTimer">10:00</span>
            </div>
        </div>
    </div>

    <div class="momo-body">
        <div class="momo-left">
            <div class="momo-qr-box">
                <img src="@Url.Content("~/images/IMG_4288.JPG")" alt="QR MoMo" />
                <p>Quét mã QR bằng ứng dụng MoMo / Ngân hàng để thanh toán.</p>
            </div>
        </div>
        <div class="momo-right">
            <ul class="momo-info-list">
                <li>
                    <span class="momo-info-label">Số tiền:</span>
                    <span class="momo-amount">
                        @String.Format("{0:0,0} VND", amount)
                    </span>
                </li>
                <li>
                    <span class="momo-info-label">Nội dung:</span>
                    <span style="font-weight:600;">@transferContent</span>
                </li>
                <li>
                    <span class="momo-info-label">Trạng thái:</span>
                    <span id="momoStatus">Đang chờ thanh toán</span>
                </li>
            </ul>
            <div class="momo-note">
                - Vui lòng giữ nguyên <strong>nội dung chuyển tiền</strong> để shop dễ kiểm tra.<br />
                - Sau khi chuyển khoản thành công, đơn hàng sẽ được xác nhận trong thời gian sớm nhất.<br />
                - Nếu hết thời gian, anh có thể đặt lại đơn hoặc liên hệ quản trị viên.
            </div>

            <div class="momo-actions">
                <a href="@Url.Action("TrackingOder", "Cart")"
                   class="btn btn-default">
                    Xem đơn hàng của tôi
                </a>
                <a href="@Url.Action("Index", "Home")"
                   class="btn btn-primary">
                    Tiếp tục mua sắm
                </a>
            </div>
        </div>
    </div>
</div>

@section scripts{
    <script>
        // Đếm ngược 10 phút
        var remaining = 10 * 60; // giây

        function updateTimer() {
            var m = Math.floor(remaining / 60);
            var s = remaining % 60;
            var text = (m < 10 ? "0" + m : m) + ":" + (s < 10 ? "0" + s : s);
            $('#momoTimer').text(text);

            if (remaining <= 0) {
                clearInterval(timerId);
                $('#momoCountdown').addClass('momo-expired');
                $('#momoStatus').text('Hết thời gian thanh toán. Vui lòng đặt lại hoặc liên hệ shop.');
            } else {
                remaining--;
            }
        }

        var timerId = setInterval(updateTimer, 1000);
        updateTimer();
    </script>
}
---

Sau khi anh:

1. **Sửa `Payment (POST)`** như trên.
2. **Tạo file view `Views/Cart/MoMoPayment.cshtml`** với nội dung trên.
3. Đảm bảo file **IMG_4288.JPG** nằm trong thư mục **Project8\images** (cùng chỗ với ảnh bìa sách).

=> Chọn “Thanh toán bằng ví MoMo” + bấm **Đặt hàng** sẽ nhảy sang màn hình có QR + đếm ngược.
